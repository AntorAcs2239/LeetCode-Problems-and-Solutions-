class Solution {
public:
    int maximalNetworkRank(int n, vector<vector<int>>& roads) {
        vector<int>graph[n+5];
        int e=roads.size();
        set<pair<int,int>>st;
        for(int i=0;i<e;i++)
        {
            int u=roads[i][0];
            int v=roads[i][1];
            graph[u].push_back(v);
            graph[v].push_back(u);
            st.insert({u,v});
            st.insert({v,u});
        }
        int ans=0;
        for(int i=0;i<n;i++)
        {
            for(int j=i+1;j<n;j++)
            {
                int a=graph[i].size();
                int b=graph[j].size();
                a+=b;
                if(st.find({i,j})!=st.end())
                {
                    a--;
                }
                ans=max(ans,a);
            }
        }
        return ans;
    }
};